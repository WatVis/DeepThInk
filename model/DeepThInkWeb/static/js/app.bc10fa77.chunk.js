(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{128:function(e,t,a){e.exports=a.p+"static/media/none_style.70a5cb7e.png"},160:function(e,t,a){e.exports=a(235)},202:function(e,t,a){e.exports=a.p+"static/media/seaLogo.2178ea2a.png"},203:function(e,t,a){e.exports=a.p+"static/media/cloudLogo.5b6fe413.png"},204:function(e,t,a){e.exports=a.p+"static/media/dirtLogo.438a7bc6.png"},205:function(e,t,a){e.exports=a.p+"static/media/bushLogo.c006aa6c.png"},206:function(e,t,a){e.exports=a.p+"static/media/mountainLogo.b051e5b2.png"},207:function(e,t,a){e.exports=a.p+"static/media/skyLogo.9f0d6c2c.png"},208:function(e,t,a){e.exports=a.p+"static/media/treeLogo.fcc942ee.png"},209:function(e,t,a){e.exports=a.p+"static/media/hillLogo.ef3c29a3.png"},210:function(e,t,a){e.exports=a.p+"static/media/riverLogo.de091209.png"},211:function(e,t,a){e.exports=a.p+"static/media/kanagawa.51983c91.jpg"},212:function(e,t,a){e.exports=a.p+"static/media/starry_night.b0b90aef.jpg"},213:function(e,t,a){e.exports=a.p+"static/media/rain_princess.1726f27b.jpg"},214:function(e,t,a){e.exports=a.p+"static/media/candy.fb7d8168.jpg"},215:function(e,t,a){e.exports=a.p+"static/media/mosaic.3cf26242.jpg"},216:function(e,t,a){e.exports=a.p+"static/media/udnie.edc8dab6.jpg"},217:function(e,t,a){e.exports=a.p+"static/media/Eraser.962677a5.png"},218:function(e,t,a){e.exports=a.p+"static/media/Marker.baa7318e.png"},219:function(e,t,a){e.exports=a.p+"static/media/Highlighter.8b1ee5a5.png"},220:function(e,t,a){e.exports=a.p+"static/media/Splotch.abef5126.png"},221:function(e,t,a){e.exports=a.p+"static/media/Crayon.6bcf61dc.png"},222:function(e,t,a){e.exports=a.p+"static/media/Charcoal.4df64008.png"},223:function(e,t,a){e.exports=a.p+"static/media/Ballpoint.6fc6ee6b.png"},224:function(e,t,a){e.exports=a.p+"static/media/Chalk.7ca67c72.png"},225:function(e,t,a){e.exports=a.p+"static/media/blur.f3ebcb97.png"},226:function(e,t,a){e.exports=a.p+"static/media/sepia.d6640e01.png"},227:function(e,t,a){e.exports=a.p+"static/media/grey.0d865fb4.png"},228:function(e,t,a){e.exports=a.p+"static/media/contrast.3ca02fc7.png"},229:function(e,t,a){e.exports=a.p+"static/media/fade.4d0a33d7.png"},230:function(e,t,a){e.exports=a.p+"static/media/invert.9671eb87.png"},231:function(e,t,a){e.exports=a.p+"static/media/AIBrush.eb0b1fec.png"},232:function(e,t,a){e.exports=a.p+"static/media/styleBrush.299130c8.png"},233:function(e,t,a){e.exports=a.p+"static/media/filterBrush.29a7a130.png"},234:function(e,t,a){e.exports=a.p+"static/media/userBrush.e241a684.png"},235:function(e,t,a){"use strict";a.r(t);var n=a(67),r=a(246),s=a(6),o=a.n(s),i=a(7),l=a.n(i),c=a(8),u=a.n(c),h=a(4),d=a.n(h),p=a(9),f=a.n(p),g=a(10),m=a.n(g),y=a(3),b=a.n(y),v=a(13),w=a.n(v),S=a(0),C=a.n(S),E=a(90),B=a(5),k=a(1),R=a(61),T=a(24),x=a(25),D=a(34),I=a(26),A=a(91),_=a(17),O=a(55),P=a.n(O);function j(e){return{drawBox:{borderColor:"black",borderWidth:2,position:"absolute",top:0,left:0},drawBoxInner:{backgroundColor:"transparent",position:"absolute",left:0,top:0,width:.33*e.width,height:.33*e.width,userDrag:"none",userSelect:"none"}}}var H=u()((function e(t,a,n,r,s,o){l()(this,e),this.x=t,this.y=a,this.thickness=n,this.color=r,this.type=s,this.canvasType=o})),M={MESSAGE_CONNECTED:1,MESSAGE_USER_JOINED:2,MESSAGE_USER_LEFT:3,MESSAGE_STROKE:4,MESSAGE_CLEAR:5,MESSAGE_CLIENT_SEND_INFO:6,MESSAGE_STROKE_START:7,MESSAGE_STROKE_END:8,MESSAGE_GENERATE:9,MESSAGE_STYLIZE:10,MESSAGE_SAVE:11,MESSAGE_SWITCH_BRUSH:12,MESSAGE_SWITCH_FILTER:13,MESSAGE_SWITCH_USER_BRUSH:14};var N="ai",U="style",G="user",L="filter";function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function W(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var F=T.default.get("window"),J=B.default.create(j(F)),Y=function(e){f()(a,e);var t=W(a);function a(e){var n;return l()(this,a),(n=t.call(this,e)).state={strokes:[]},n.loadData=function(e){var t=n.canvasRef.current,a=t.getContext("2d"),r=new Image(t);r.src=e,a.save(),a.drawImage(r,0,0,n.props.width,n.props.height),a.restore()},n.onDrawMove=function(e){if(!n.props.disable&&n.props.brushType===N){var t=e.nativeEvent.locationX,a=e.nativeEvent.locationY,r=new H(t,a,n.props.thickness,n.props.color,"move","ai");n.updateCanvas(r,"self"),n.setState({strokes:n.state.strokes.concat(r)})}},n.onDrawStart=function(e){if(!n.props.disable&&n.props.brushType===N){var t=e.nativeEvent.locationX,a=e.nativeEvent.locationY,r=new H(t,a,n.props.thickness,n.props.color,"start","ai");n.updateCanvas(r,"self"),n.setState({strokes:n.state.strokes.concat(r)})}},n.onDrawEnd=function(e){if(!n.props.disable&&n.props.brushType===N){var t=e.nativeEvent.locationX,a=e.nativeEvent.locationY,r=new H(t,a,n.props.thickness,n.props.color,"end","ai");n.updateCanvas(r,"self"),n.setState({strokes:n.state.strokes.concat(r)})}},n.updateCanvas=function(e,t){if(n.canvasRef){var a,r;if("self"==t){if(!n.state.strokes||n.state.strokes.length<1)return;r=(a=n.state.strokes)[a.length-1]}else{if(!n.props.otherStrokes||n.props.otherStrokes.length<3)return;r=(a=n.props.otherStrokes)[a.length-2]}var s=n.canvasRef.current,o=a.length;if(s&&o>0){var i=e.x,l=e.y,c=e.type,u=e.thickness,h=s.getContext("2d");switch(h.lineWidth=u,c){case"start":h.moveTo(i,l),h.beginPath(),h.lineTo(i,l);break;case"end":break;case"move":h.beginPath(),h.moveTo(r.x,r.y),h.globalCompositeOperation="source-over",h.lineTo(i,l)}h.fillStyle=e.color,h.strokeStyle=e.color,h.lineJoin=h.lineCap="round",h.closePath(),h.stroke()}}},n.clearCanvas=function(){var e=n.canvasRef.current,t=e.getContext("2d");t.fillStyle="#759edf",t.fillRect(0,0,e.width,e.height),n.props.isFirstLoadDrawCanvas&&(t.fillStyle="#384f83",t.fillRect(0,3*e.height/4,e.width,e.height/4))},n.handleCanvas=function(e){if(null!==e){e.getContext("2d");e.width=n.props.width,e.height=n.props.height,n.canvasRef=e,n.canvasRef.current=e,n.clearCanvas()}},n.getPathData=function(e,t,a,r){return{drawer:null,size:{width:n.canvas._size.width,height:n.canvas._size.height},path:{data:[e.toString()+","+t.toString()],width:a,color:r,id:parseInt(1e8*Math.random())}}},n.getPathDataArray=function(e,t,a){parsedArr=[];for(var r=0;r<e.length;r++)parsedArr.push(e[r].x+","+e[r].y);return{drawer:null,size:{width:n.canvas._size.width,height:n.canvas._size.height},path:{data:parsedArr,width:t,color:a,id:parseInt(1e8*Math.random())}}},n.getBase64=function(){var e,t;return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=n.canvasRef.current,"string"!=typeof(t=e.toDataURL(1))){a.next=7;break}return n.setState((function(e){return z(z({},e),{},{imagedata:t})})),a.abrupt("return",Promise.resolve(t));case 7:return a.abrupt("return",t);case 8:case"end":return a.stop()}}),null,null,null,Promise)},n.handleCanvas=n.handleCanvas.bind(d()(n)),n.thickness=e.thickness,n.color=e.color,n.canvasRef=null,n.width=e.width,n.height=e.height,n.canvasOpacity=e.canvasOpacity,n.clearCanvas=n.clearCanvas.bind(d()(n)),n.imagedata="",n}return u()(a,[{key:"componentDidUpdate",value:function(e){if(e.otherStrokes!=this.props.otherStrokes&&this.props.otherStrokes.length>0){var t=this.props.otherStrokes[this.props.otherStrokes.length-1];t.canvasType==N&&this.updateCanvas(t,"other")}}},{key:"componentDidMount",value:function(){this.props.setClickClear(this.clearCanvas)}},{key:"render",value:function(){return"web"===_.default.OS?C.a.createElement(k.default,{style:[J.drawBoxInner,{width:this.props.width,height:this.props.height,opacity:this.props.opacity}],onStartShouldSetResponder:function(e){return!0},onMoveShouldSetResponder:function(e){return!0},onResponderStart:this.onDrawStart,onResponderMove:this.onDrawMove,onResponderRelease:this.onDrawEnd},C.a.createElement("canvas",{draggable:!1,ref:this.handleCanvas})):C.a.createElement(k.default,{onStartShouldSetResponder:function(e){return!0},onMoveShouldSetResponder:function(e){return!0},onResponderStart:this.onDrawStart,onResponderMove:this.onDrawMove,onResponderRelease:this.onDrawEnd,style:J.drawBox},C.a.createElement(P.a,{draggable:!1,width:J.drawBox.width,height:J.drawBox.height,ref:this.handleCanvas}))}}]),a}(S.Component),q="localhost",X="eraser",K="pencil",Z="paint",Q="splotch";function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var ae=T.default.get("window"),ne=B.default.create(j(ae)),re=function(e){f()(a,e);var t=te(a);function a(e){var n;return l()(this,a),(n=t.call(this,e)).state={strokes:[],imageBrush:"data:image/png;base64,",imagedata:""},n.hexToRGB=function(e,t){var a=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return t?"rgba("+a+", "+n+", "+r+", "+t+")":"rgb("+a+", "+n+", "+r+")"},n.myRand=function(e,t){return Math.random()*(t-e)+e},n.myRand2=function(e,t){return n.myRand(e-t*e,e+t*e)},n.makeBrushColor=function(e){var t=d()(n);console.log("Making newbrush"),fetch("http://"+q+":8000/makeBrush",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({brushType:n.props.userBrushType,color:e})}).then((function(e){e.json().then((function(e){t.setState((function(t,a){return ee(ee({},t),{},{imageBrush:e.data.imageData})}))}))})).catch((function(e){console.log(e)}))},n.onDrawMove=function(e){if(!n.props.disable&&n.props.brushType===G){var t=e.nativeEvent.locationX,a=e.nativeEvent.locationY,r=new H(t,a,n.props.thickness,n.hexToRGB(n.props.color,n.props.opacity),"move");n.updateCanvas(r,"self"),n.setState((function(e){return ee(ee({},e),{},{strokes:n.state.strokes.concat(r)})}))}},n.onDrawStart=function(e){if(!n.props.disable&&n.props.brushType===G){var t=e.nativeEvent.locationX,a=e.nativeEvent.locationY,r=new H(t,a,n.props.thickness,n.props.color,"start","user");n.updateCanvas(r,"self"),n.setState((function(e){return ee(ee({},e),{},{strokes:n.state.strokes.concat(r)})}))}},n.onDrawEnd=function(e){if(!n.props.disable&&n.props.brushType===G){var t=e.nativeEvent.locationX,a=e.nativeEvent.locationY,r=new H(t,a,n.props.thickness,n.props.color,"end","user");n.updateCanvas(r,"self"),n.setState((function(e){return ee(ee({},e),{},{strokes:n.state.strokes.concat(r)})}))}},n.clearCanvas=function(){n.setState((function(e){return ee(ee({},e),{},{imagedata:""})}));var e=n.canvasRef.current;e.getContext("2d").clearRect(0,0,e.width,e.height)},n.clearCanvasKeepState=function(){var e=n.canvasRef.current;e.getContext("2d").clearRect(0,0,e.width,e.height)},n.updateCanvas=function(e,t){if(n.canvasRef){var a,r,s=e.offset||0;if("self"==t){if(!n.state.strokes||n.state.strokes.length<1)return;r=(a=n.state.strokes)[a.length-1]}else{if(!n.props.otherStrokes||n.props.otherStrokes.length<3)return;r=(a=n.props.otherStrokes)[a.length-2]}var o=n.canvasRef.current,i=a.length;if(o&&i>0){var l=e.x,c=e.y,u=e.type,h=e.thickness,d=o.getContext("2d");switch(d.lineWidth=h,u){case"start":d.moveTo(l-s,c-s),d.beginPath(),d.lineTo(l-s,c-s);break;case"end":break;case"move":d.beginPath(),d.moveTo(r.x-s,r.y-s),d.lineTo(l-s,c-s)}if(n.props.userBrushType==Z)d.fillStyle=n.hexToRGB(n.props.color,n.props.opacity),d.strokeStyle=n.hexToRGB(n.props.color,n.props.opacity),d.lineJoin="miter",d.lineCap="butt",console.log("IANTNT",d.lineJoin,d.lineCap),d.closePath(),d.stroke();else if(n.props.userBrushType==K)d.fillStyle=n.hexToRGB(n.props.color,n.props.opacity),d.strokeStyle=n.hexToRGB(n.props.color,n.props.opacity),d.lineJoin=d.lineCap="round",d.closePath(),d.stroke();else if(n.props.userBrushType==X)d.globalCompositeOperation="destination-out",d.lineJoin=d.lineCap="round",d.strokeStyle="rgba(255,255,255,1)",d.closePath(),d.stroke(),d.globalCompositeOperation="source-over";else if(n.props.userBrushType==Q)Math.random()<.99&&(d.beginPath(),d.arc(l-s,c-s,Math.random()*h/2,!1,2*Math.PI,!1),d.fillStyle=n.hexToRGB(n.props.color,Math.random()),d.fill());else if(n.props.userBrushType.includes("image")){d.globalAlpha=n.props.opacity;var p=new Image(o);p.src=n.state.imageBrush,d.save(),d.translate(l-s-h/2+h/2,c-s-h/2+h/2);var f=180*Math.atan2(c-r.y,l-r.x)/Math.PI;d.rotate(f*Math.PI/180),d.translate(-(l-s-h/2)-h/2,-(c-s-h/2)-h/2),d.drawImage(p,l-s-h/2,c-s-h/2,h,h),d.restore(),d.globalAlpha=1}}}},n.loadData=function(e){var t=n.canvasRef.current,a=t.getContext("2d"),r=new Image(t);r.src=e,a.save(),a.drawImage(r,0,0,n.props.width,n.props.height),a.restore()},n.handleCanvas=function(e){if(null!==e){e.getContext("2d");e.width=n.props.width,e.height=n.props.height,n.canvasRef=e,n.canvasRef.current=e}},n.getPathData=function(e,t,a,r){return{drawer:null,size:{width:n.canvas._size.width,height:n.canvas._size.height},path:{data:[e.toString()+","+t.toString()],width:a,color:r,id:parseInt(1e8*Math.random())}}},n.getPathDataArray=function(e,t,a){parsedArr=[];for(var r=0;r<e.length;r++)parsedArr.push(e[r].x+","+e[r].y);return{drawer:null,size:{width:n.canvas._size.width,height:n.canvas._size.height},path:{data:parsedArr,width:t,color:a,id:parseInt(1e8*Math.random())}}},n.getBase64=function(){var e,t;return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=n.canvasRef.current,"string"!=typeof(t=e.toDataURL())){a.next=7;break}return n.setState((function(e){return ee(ee({},e),{},{imagedata:t})})),a.abrupt("return",Promise.resolve(t));case 7:return a.abrupt("return",t);case 8:case"end":return a.stop()}}),null,null,null,Promise)},n.onStrokeEndHandler=function(){},n.onStrokeStartHandler=function(e,t){},n.defaultWhiteCanvas=function(){var e=n.canvasRef.current,t=e.getContext("2d");t.fillStyle="rgba(255,255,255,0.0)",t.fillRect(0,0,e.width,e.height)},n.handleCanvas=n.handleCanvas.bind(d()(n)),n.thickness=e.thickness,n.color=e.color,n.canvasRef=null,n.width=e.width,n.height=e.height,n.canvasOpacity=e.canvasOpacity,n.state={strokes:[],imageBrush:"data:image/png;base64,"},n.clearCanvas=n.clearCanvas.bind(d()(n)),n}return u()(a,[{key:"componentDidMount",value:function(){this.props.setClickClear(this.clearCanvas),this.defaultWhiteCanvas()}},{key:"componentDidUpdate",value:function(e){if(e.otherStrokes!=this.props.otherStrokes&&this.props.otherStrokes.length>0){var t=this.props.otherStrokes[this.props.otherStrokes.length-1];t.canvasType==G&&this.updateCanvas(t,"other")}e.width==this.props.width&&e.height==this.props.height||(this.canvasRef.current.width=this.props.width,this.canvasRef.current.height=this.props.height,console.log("RESIZING CANVAS"));var a=this;(this.props.brushType===G&&this.props.userBrushType.includes("image")&&e.userBrushType!==this.props.userBrushType||e.color!==this.props.color)&&(console.log("Making newbrush"),fetch("http://"+q+":8000/makeBrush",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({brushType:this.props.userBrushType,color:this.props.color})}).then((function(e){e.json().then((function(e){a.setState((function(t,a){return ee(ee({},t),{},{imageBrush:e.data.imageData})}))}))})).catch((function(e){console.log(e)})))}},{key:"render",value:function(){return"web"===_.default.OS?C.a.createElement(k.default,{style:[ne.drawBoxInner,{width:this.props.width,height:this.props.height}],onStartShouldSetResponder:function(e){return!0},onMoveShouldSetResponder:function(e){return!0},onResponderStart:this.onDrawStart,onResponderMove:this.onDrawMove,onResponderRelease:this.onDrawEnd},C.a.createElement("canvas",{draggable:!1,ref:this.handleCanvas,id:"mycanvas",width:this.props.width,height:this.props.height})):C.a.createElement(k.default,{onStartShouldSetResponder:function(e){return!0},onMoveShouldSetResponder:function(e){return!0},onResponderStart:this.onDrawStart,onResponderMove:this.onDrawMove,onResponderRelease:this.onDrawEnd,style:ne.drawBox},C.a.createElement(P.a,{width:ne.drawBox.width,height:ne.drawBox.height,ref:this.handleCanvas,id:"mycanvas",draggable:!1}))}}]),a}(S.Component),se=a(150),oe=a.n(se),ie={colors:[{color:"#384f83",id:154,label:"Sea",logo:a(202)},{color:"#efefef",id:105,label:"Cloud",logo:a(203),labelColor:"#d3d3d3"},{color:"#2c1e16",id:110,label:"Dirt",logo:a(204)},{color:"#5d6e32",id:96,label:"Bush",logo:a(205)},{color:"#3c3b4b",id:134,label:"Mountain",logo:a(206)},{color:"#759edf",id:156,label:"Sky",logo:a(207)},{color:"#352613",id:168,label:"Tree",logo:a(208)},{color:"#776c2d",id:126,label:"Hill",logo:a(209)},{color:"#32604d",id:147,label:"River",logo:a(210)}]},le={styles:[{name:"kanagawa",label:"Kanagawa",image_url:a(211)},{name:"starry_night",label:"Starry Night",image_url:a(212)},{name:"rain_princess",label:"Rain Princess",image_url:a(213)},{name:"candy",label:"Candy",image_url:a(214)},{name:"mosaic",label:"Mosaic",image_url:a(215)},{name:"udnie",label:"Udnie",image_url:a(216)}]},ce={userBrushes:[{name:"eraser",label:"Eraser",image_url:a(217)},{name:"pencil",label:"Marker",image_url:a(218)},{name:"paint",label:"Highlighter",image_url:a(219)},{name:"splotch",label:"Splotch",image_url:a(220)},{name:"image_brush",label:"Crayon",image_url:a(221)},{name:"image_charcoal",label:"Charcoal",image_url:a(222)},{name:"image_ballpoint",label:"Ballpoint",image_url:a(223)},{name:"image_chalk",label:"Chalk",image_url:a(224)}]},ue={filters:[{name:"blur",label:"Blur",filter:"blur(2px)",image_url:a(225)},{name:"sepia",label:"Sepia",filter:"sepia(100)",image_url:a(226)},{name:"grey",label:"Grey",filter:"grayscale(80%)",image_url:a(227)},{name:"contrast",label:"Contrast",filter:"contrast(150%)",image_url:a(228)},{name:"fade",label:"Fade",filter:"blur(0.2px) brightness(110%) hue-rotate(5deg) saturate(0.5) opacity(85%)",image_url:a(229)},{name:"invert",label:"Invert",filter:"invert(100%) hue-rotate(90deg)",image_url:a(230)}]},he=a(244),de=a(151);function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ge(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var me=T.default.get("window"),ye=.8*me.height,be=.8*me.height,ve="http://region-11.autodl.com:25172",we=function(e){f()(r,e);var t=ge(r);function r(e){var a;return l()(this,r),(a=t.call(this,e)).state={showAICanvas:!0,showUserCanvas:!1,rightColumnWidth:.11*me.height*1.8,rightColumnMargin:.007*me.height,leftColumnWidth:.25*me.height,leftColumnLeftMargin:.007*me.height,AI_CANVASWIDTH:Math.min(.65*(me.width-.605*me.height),.65*me.height),AI_CANVASHEIGHT:Math.min(.65*(me.width-.605*me.height),.65*me.height),USER_CANVASWIDTH:Math.min(.65*(me.width-.605*me.height),.65*me.height),USER_CANVASHEIGHT:Math.min(.65*(me.width-.605*me.height),.65*me.height),aiCanvasImageData:"data:image/png;base64,",imageData:"data:image/png;base64,",generatedImageData:"data:image/png;base64,",stylizedImageData:"data:image/png;base64,",displayedImageData:"data:image/png;base64,",finalImageData:"data:image/png;base64,",style:"none",color:"#384f83",imageFilter:"",userBrushColor:"#00FF00",colorPickerDisplay:{r:0,g:255,b:0,a:1},userBrushBase64:"data:image/png;base64,",userBrushType:K,styleBrushType:"None",filterBrushType:"None",thickness:10,ownStroke:[],collaboratorStroke:[],opacity:1,displayColorPicker:!1,disableDrawing:!1,disableButtons:!1,canvasWidth:ye,canvasHeight:be,currentBrush:N,showImageForEyeDropper:!1,showPreview:!0,isLoading:!0,isChangeSize:!1,isFirstLoadDrawCanvas:!0},a.grabPixels=function(){return w.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState((function(e){return fe(fe({},e),{},{isLoading:!0})})),a.refs.drawCanvasRef.getBase64().then((function(e){var t=e.split(";base64,")[1];console.log("result image is",t),a.setState((function(e){return fe(fe({},e),{},{imageData:t})}),a.sendRequestHelper)}));case 2:case"end":return e.stop()}}),null,null,null,Promise)},a.sendRequestHelper=function(){var e,t;return w.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a.setState((function(e){return fe(fe({},e),{},{isLoading:!0})})),n.next=3,w.a.awrap(fetch(ve+"/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageData:a.state.imageData})}));case 3:return e=n.sent,n.next=6,w.a.awrap(e.json());case 6:t=n.sent,console.log(t),a.setState((function(e){return fe(fe({},e),{},{generatedImageData:t.data,displayedImageData:t.data})})),a.setState((function(e){return fe(fe({},e),{},{isLoading:!1})}));case 10:case"end":return n.stop()}}),null,null,null,Promise)},a.sendRequestStyleHelper=function(e){var t,n;return w.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a.setState((function(e){return fe(fe({},e),{},{isLoading:!0})})),r.next=3,w.a.awrap(fetch(ve+"/stylize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageData:a.state.generatedImageData,style:e})}));case 3:return t=r.sent,r.next=6,w.a.awrap(t.json());case 6:n=r.sent,console.log(n),a.setState((function(t){return fe(fe({},t),{},{styleBrushType:e,stylizedImageData:n.data,displayedImageData:n.data})})),a.setState((function(e){return fe(fe({},e),{},{isLoading:!1})}));case 10:case"end":return r.stop()}}),null,null,null,Promise)},a.saveGeneratedImage=function(){if(null!=a.refs.userCanvasRef)a.refs.userCanvasRef.getBase64().then((function(e){var t=e.split(";base64,")[1],n=a.state.displayedImageData.split(";base64,")[1];a.setState((function(e){return fe(fe({},e),{},{isLoading:!0})})),a.state.socket.send(JSON.stringify({kind:M.MESSAGE_SAVE,data:{displayedImageData:n,userCanvasImageData:t,aiCanvasImageData:a.state.imageData}}))}));else alert("Unable to save the painting in AI Brush. Please select 'User Brush' or 'Style' or 'Filter' and try again.")},a.handleThickness=function(e){a.setState((function(t){return fe(fe({},t),{},{thickness:e,isChangeSize:!0})})),console.log("thickness is now",e)},a.handleThicknessEnd=function(e){a.setState((function(e){return fe(fe({},e),{},{isChangeSize:!1})})),console.log("thickness is done chaging",e)},a.handleOpacity=function(e){a.setState((function(t){return fe(fe({},t),{},{opacity:e})})),console.log("opacity is now",e)},a.rgbToHex=function(e){return"#"+(16777216+(e.r<<16|e.g<<8|e.b<<0)).toString(16).slice(1)},a.hex2rgb=function(e){return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},a.enableAICanvas=function(){if(!a.state.showAICanvas)a.refs.userCanvasRef.getBase64().then((function(e){a.setState((function(t){return fe(fe({},t),{},{showAICanvas:!0,showUserCanvas:!1,userCanvasImageData:e})}),(function(){for(var e=0;e<2;e++)setTimeout((function(){a.refs.drawCanvasRef.loadData(a.state.aiCanvasImageData)}),0);a.refs.drawCanvasRef.loadData(a.state.aiCanvasImageData)}))}))},a.loadUserCanvas=function(){a.setState((function(e){return fe(fe({},e),{},{showUserCanvas:!0,isLoading:!0})}),(function(){for(var e=0;e<2;e++)setTimeout((function(){null!==a.refs.userCanvasRef&&(console.log("Load user canvas"),a.refs.userCanvasRef.loadData(a.state.userCanvasImageData),a.setState((function(e){return fe(fe({},e),{},{isLoading:!1,disableDrawing:!1})}),(function(){a.refs.userCanvasRef.makeBrushColor(a.state.userBrushColor)})))}),1500)}))},a.enableUserCanvas=function(){if(!a.state.showUserCanvas)a.refs.drawCanvasRef.getBase64().then((function(e){a.setState((function(t){return fe(fe({},t),{},{showAICanvas:!1,showUserCanvas:!0,aiCanvasImageData:e})}),(function(){for(var e=0;e<2;e++)setTimeout((function(){a.refs.userCanvasRef.loadData(a.state.userCanvasImageData)}),0)}))}))},a.disableUserCanvas=function(){if(!a.state.showAICanvas)a.refs.userCanvasRef.getBase64().then((function(e){a.setState((function(t){return fe(fe({},t),{},{showAICanvas:!1,showUserCanvas:!1,userCanvasImageData:e})}))}))},a.enableUserCanvas=function(){if(!a.state.showUserCanvas)a.refs.drawCanvasRef.getBase64().then((function(e){a.setState((function(t){return fe(fe({},t),{},{showAICanvas:!1,showUserCanvas:!0,aiCanvasImageData:e})}),(function(){for(var e=0;e<2;e++)setTimeout((function(){a.refs.userCanvasRef.loadData(a.state.userCanvasImageData)}),0)}))}))},a.switchToAICanvas=function(){a.setState((function(e){return fe(fe({},e),{},{currentBrush:N})})),a.enableAICanvas()},a.switchToStyleBrush=function(){a.setState((function(e){return fe(fe({},e),{},{currentBrush:U})})),a.enableUserCanvas()},a.switchToFilterBrush=function(){a.setState((function(e){return fe(fe({},e),{},{currentBrush:L})})),a.enableUserCanvas()},a.switchToUserBrush=function(){a.setState((function(e){return fe(fe({},e),{},{currentBrush:G})})),a.enableUserCanvas()},a.sendRequestHelper=a.sendRequestHelper.bind(d()(a)),a}return u()(r,[{key:"componentDidMount",value:function(){console.log("Attempting connection"),this.setState((function(e){return fe(fe({},e),{},{isLoading:!1,isFirstLoadDrawCanvas:!1})}))}},{key:"render",value:function(){var e=this,t=C.a.createElement(k.default,{style:{backgroundColor:"#f2f2eb",width:this.state.leftColumnWidth,marginLeft:this.state.leftColumnLeftMargin,borderRadius:10,flexDirection:"column",padding:5}},C.a.createElement(k.default,null,C.a.createElement(I.default,{style:{textAlign:"center",color:"#363636",fontWeight:"bold",fontSize:16,padding:2}},"Size")),C.a.createElement(oe.a,{style:{width:.22*me.height,margin:"auto",height:.03*me.height},value:this.state.thickness,minimumValue:1,maximumValue:ye/4,thumbTintColor:"#4f4f4f",minimumTrackTintColor:"#707070",maximumTrackTintColor:"#cfcfcf",onValueChange:this.handleThickness,onSlidingComplete:this.handleThicknessEnd}));return document.documentElement.style.height="100%",document.documentElement.style.overflow="hidden",document.body.style.height="100%",document.body.style.overflow="auto",C.a.createElement(k.default,{style:Se.container},C.a.createElement(k.default,{style:{width:this.state.leftColumnLeftMargin+this.state.leftColumnWidth}},C.a.createElement(D.default,{onPress:function(){e.switchToAICanvas()},disabled:this.state.disableButtons},C.a.createElement(x.default,{style:[Se.brushes,{height:this.state.currentBrush==N?.1*me.height:.08*me.height,width:this.state.currentBrush==N?.1*me.height*1.5:.08*me.height*1.5,opacity:this.state.currentBrush==N?1:.55}],source:a(231)})),C.a.createElement(D.default,{onPress:function(){e.switchToStyleBrush()},disabled:this.state.disableButtons},C.a.createElement(x.default,{style:[Se.brushes,{height:this.state.currentBrush==U?.1*me.height:.08*me.height,width:this.state.currentBrush==U?.1*me.height*1.5:.08*me.height*1.5,opacity:this.state.currentBrush==U?1:.55}],source:a(232)})),C.a.createElement(D.default,{onPress:function(){e.switchToFilterBrush()},disabled:this.state.disableButtons},C.a.createElement(x.default,{style:[Se.brushes,{height:this.state.currentBrush==L?.1*me.height:.08*me.height,width:this.state.currentBrush==L?.1*me.height*1.5:.08*me.height*1.5,opacity:this.state.currentBrush==L?1:.55}],source:a(233)})),C.a.createElement(D.default,{onPress:function(){e.switchToUserBrush()},disabled:this.state.disableButtons},C.a.createElement(x.default,{style:[Se.brushes,{height:this.state.currentBrush==G?.1*me.height:.08*me.height,width:this.state.currentBrush==G?.1*me.height*1.5:.08*me.height*1.5,opacity:this.state.currentBrush==G?1:.55}],source:a(234)})),this.state.currentBrush==N&&C.a.createElement(k.default,null,t),this.state.currentBrush==G&&C.a.createElement(k.default,null,C.a.createElement(de.RgbaColorPicker,{style:{marginLeft:this.state.leftColumnLeftMargin,marginBottom:3,width:this.state.leftColumnWidth,height:this.state.leftColumnWidth},color:this.state.colorPickerDisplay,onChange:function(t){e.setState((function(a){return fe(fe({},a),{},{userBrushColor:e.rgbToHex(t),opacity:t.a,colorPickerDisplay:t})}))}}),t)),C.a.createElement(k.default,{style:{flexDirection:"column"}},C.a.createElement(k.default,{style:{flexDirection:"row",paddingTop:.01*me.height,alignContent:"flex-end",marginLeft:"auto"}}),C.a.createElement(k.default,{style:{flexDirection:"row"}},this.state.showAICanvas&&this.state.showPreview&&C.a.createElement(k.default,{style:[Se.shadowBoxAICanvas,{width:this.state.USER_CANVASHEIGHT/1.5,height:this.state.USER_CANVASHEIGHT/1.5,marginRight:5}]},C.a.createElement(A.default,{source:this.state.displayedImageData,style:{filter:this.state.imageFilter}},C.a.createElement(x.default,{style:[{width:this.state.USER_CANVASHEIGHT/1.5,height:this.state.USER_CANVASHEIGHT/1.5}],source:this.state.userCanvasImageData}))),!this.state.showAICanvas&&this.state.showPreview&&C.a.createElement(k.default,{style:[Se.shadowBoxAICanvas,{width:this.state.USER_CANVASHEIGHT/1.5,height:this.state.USER_CANVASHEIGHT/1.5,marginRight:5}]},C.a.createElement(x.default,{style:{width:this.state.USER_CANVASHEIGHT/1.5,height:this.state.USER_CANVASHEIGHT/1.5},source:this.state.aiCanvasImageData})),C.a.createElement(k.default,{style:{flexDirection:"column"}},this.state.showAICanvas&&C.a.createElement(k.default,{id:"drawGroup",style:Se.drawGroup},C.a.createElement(k.default,{style:[Se.shadowBoxAICanvas,{width:this.state.AI_CANVASWIDTH,height:this.state.AI_CANVASHEIGHT}]},C.a.createElement(Y,{ref:"drawCanvasRef",setClickClear:function(t){return e.clearChildAIBrush=t},style:{backgroundColor:"black",position:"absolute",background:"transparent"},brushType:this.state.currentBrush,thickness:this.state.thickness,color:this.state.color,otherStrokes:this.state.collaboratorStroke,width:this.state.AI_CANVASWIDTH,height:this.state.AI_CANVASHEIGHT,opacity:1,disable:this.state.disableDrawing,isFirstLoadDrawCanvas:this.state.isFirstLoadDrawCanvas}))),this.state.showUserCanvas&&C.a.createElement(k.default,{id:"drawGroup",style:Se.drawGroup},C.a.createElement(k.default,{style:[Se.generatedImageBox,{width:this.state.USER_CANVASWIDTH,height:this.state.USER_CANVASHEIGHT}]},null!=this.state.displayedImageData?C.a.createElement(x.default,{draggable:!1,style:[Se.generatedImage,{filter:this.state.imageFilter}],source:{uri:this.state.displayedImageData}}):null),C.a.createElement(k.default,{style:[Se.shadowBox,{width:this.state.USER_CANVASWIDTH,height:this.state.USER_CANVASHEIGHT}]},C.a.createElement(re,{ref:"userCanvasRef",setClickClear:function(t){return e.clearChildUserBrush=t},style:{position:"absolute",background:"transparent"},brushType:this.state.currentBrush,userBrushType:this.state.userBrushType,thickness:this.state.thickness,color:this.state.userBrushColor,otherStrokes:this.state.collaboratorStroke,width:this.state.USER_CANVASWIDTH,height:this.state.USER_CANVASHEIGHT,opacity:this.state.opacity,disable:this.state.disableDrawing,id:"myCanvas"}))),this.state.showImageForEyeDropper&&C.a.createElement(k.default,{style:Se.shadowBox},C.a.createElement(x.default,{style:{width:this.state.USER_CANVASWIDTH,height:this.state.USER_CANVASHEIGHT},source:this.state.finalImageData})),this.state.currentBrush==N&&C.a.createElement(k.default,{style:{flexDirection:"row",justifyContent:"space-around"}},C.a.createElement(k.default,{style:{padding:5,width:"40%"}},C.a.createElement(R.default,{style:{marginTop:10,height:"80"},color:"#5e748a",title:"clear",onPress:function(){return e.clearChildAIBrush()}})),C.a.createElement(k.default,{style:{padding:5,width:"40%"}},C.a.createElement(R.default,{mode:"contained",style:{padding:10},onPress:this.grabPixels.bind(this),color:"#88508c",title:"generate",disabled:this.state.isLoading}))),this.state.currentBrush==G&&C.a.createElement(k.default,{style:{flexDirection:"row",justifyContent:"space-around"}},C.a.createElement(k.default,{style:{padding:5,width:"40%"}},C.a.createElement(R.default,{color:"#717591",title:"clear strokes",onPress:function(){return e.clearChildUserBrush()}})))))),C.a.createElement(k.default,{style:{flexDirection:"row"}},this.state.currentBrush==N&&C.a.createElement(k.default,{style:Se.brushesContainer},C.a.createElement(n.ScrollView,null,ie.colors.map((function(t){return C.a.createElement(k.default,{style:{margin:2}},C.a.createElement(D.default,{style:{padding:4,borderRadius:5,backgroundColor:t.color,borderWidth:e.state.color==t.color?10:0,borderColor:"#efefef"==t.color?"#d1d1d1":"#f2f2eb"},onPress:function(){e.setState({color:t.color})},disabled:e.state.disableButtons},C.a.createElement(x.default,{draggable:!1,style:Se.brushes,source:t.logo}),C.a.createElement(I.default,{style:{fontSize:.015*me.height,color:"#efefef"==t.color?"#3d3d3d":"white"}},t.label)))})))),this.state.currentBrush==U&&C.a.createElement(k.default,{style:Se.brushesContainer},C.a.createElement(n.ScrollView,null,C.a.createElement(k.default,{style:{margin:2}},C.a.createElement(D.default,{style:[Se.functionButton,{backgroundColor:"None"==this.state.styleBrushType?"#3d3d3d":"#dbdbdb"}],onPress:function(){e.setState((function(t){return fe(fe({},t),{},{displayedImageData:e.state.generatedImageData,styleBrushType:"None"})}))},disabled:this.state.disableButtons},C.a.createElement(x.default,{style:Se.brushes,source:a(128)}),C.a.createElement(I.default,{style:{color:"None"==this.state.styleBrushType?"white":"black",fontSize:.015*me.height,fontWeight:"500"}}," ","None"," "))),le.styles.map((function(t){return C.a.createElement(k.default,{style:{margin:2}},C.a.createElement(D.default,{disabled:e.state.disableButtons,style:[Se.functionButton,{backgroundColor:e.state.styleBrushType==t.name?"#3d3d3d":"#dbdbdb"}],onPress:function(){e.sendRequestStyleHelper(t.name),e.setState((function(e){return{styleBrushType:t.name}}))}},C.a.createElement(x.default,{style:Se.brushes,source:t.image_url}),C.a.createElement(I.default,{style:{color:e.state.styleBrushType==t.name?"white":"black",fontSize:.015*me.height,fontWeight:"500"}},t.label)))})))),this.state.currentBrush==L&&C.a.createElement(k.default,{style:Se.brushesContainer},C.a.createElement(n.ScrollView,null,C.a.createElement(k.default,{style:{margin:2}},C.a.createElement(D.default,{style:[Se.functionButton,{backgroundColor:"None"==this.state.filterBrushType?"#3d3d3d":"#dbdbdb"}],onPress:function(){e.setState((function(e){return fe(fe({},e),{},{imageFilter:"",filterBrushType:"None"})}))},disabled:this.state.disableButtons},C.a.createElement(x.default,{style:Se.brushes,source:a(128)}),C.a.createElement(I.default,{style:{color:"None"==this.state.filterBrushType?"white":"black",fontSize:.015*me.height,fontWeight:"500"}}," ","None"," "))),ue.filters.map((function(t){return C.a.createElement(k.default,{style:{margin:2}},C.a.createElement(D.default,{disabled:e.state.disableButtons,style:[Se.functionButton,{backgroundColor:e.state.filterBrushType==t.name?"#3d3d3d":"#dbdbdb"}],onPress:function(){e.setState((function(e){return{imageFilter:t.filter,filterBrushType:t.name}}))}},C.a.createElement(x.default,{style:Se.brushes,source:t.image_url}),C.a.createElement(I.default,{style:{color:e.state.filterBrushType==t.name?"white":"black",fontSize:.015*me.height,fontWeight:"500"}},t.label)))}))))),this.state.currentBrush==G&&C.a.createElement(k.default,{style:Se.brushesContainer},C.a.createElement(n.ScrollView,null,ce.userBrushes.map((function(t){return C.a.createElement(k.default,{style:{margin:2}},C.a.createElement(D.default,{style:[Se.functionButton,{backgroundColor:e.state.userBrushType==t.name?"#3d3d3d":"white"}],onPress:function(){e.setState((function(e){return fe(fe({},e),{},{userBrushType:t.name})}))}},C.a.createElement(x.default,{style:Se.userBrushes,source:t.image_url}),C.a.createElement(I.default,{style:{color:e.state.userBrushType==t.name?"white":"#2e2e2e",fontSize:.015*me.height}},t.label)))})))),C.a.createElement(k.default,{style:Se.spinnerContainer},C.a.createElement(E.default,{animating:this.state.isLoading,size:"large",color:"#545454",style:{transform:[{scale:3}]}})),1==this.state.isChangeSize&&C.a.createElement(k.default,{style:Se.circleContainer},C.a.createElement(I.default,{style:{color:"#4d4d4d",fontWeight:"bold"}},"Size Preview:"),C.a.createElement(he.default,{style:{opacity:this.state.opacity,justifyContent:"center",alignItems:"center",margin:"auto"},name:"ellipse",color:this.state.currentBrush==G?this.state.userBrushColor:this.state.color,size:1.2*this.state.thickness})))}}]),r}(S.Component),Se=B.default.create({container:{flex:1,flexDirection:"row",justifyContent:"space-between",backgroundColor:"white"},generatedImageBox:{userDrag:"none",userSelect:"none",backgroundColor:"transparent",position:"absolute"},generatedImage:{width:"100%",height:"100%",userDrag:"none",userSelect:"none"},shadowBoxAICanvas:{shadowColor:"grey",shadowRadius:20,position:"relative"},shadowBox:{shadowColor:"grey",shadowRadius:20,position:"relative"},functionButton:{padding:4,borderRadius:5},drawGroup:{flexDirection:"row"},strokeGroup:{flexDirection:"column",alignItems:"center"},toolGroup:{flexDirection:"row",justifyContent:"space-around"},brushes:{margin:0,height:.06*me.height,width:.06*me.height*1.8,padding:0,userDrag:"none",userSelect:"none"},donwloadButton:{margin:0,height:.145*me.height*.4,width:.145*me.height*.41,padding:0,userDrag:"none",userSelect:"none"},brushesContainer:{flexDirection:"column",justifyContent:"space-around",alignItems:"center",height:me.height,borderLeftColor:"#C8C8C8",backgroundColor:"#f2f2eb",borderLeftWidth:3},userBrushes:{justifyContent:"start",margin:0,height:.06*me.height,width:.06*me.height*1.8,paddingTop:0},spinnerTextStyle:{color:"transparent"},spinnerContainer:{position:"absolute",flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"transparent",left:me.width/2,top:me.height/2.5},circleContainer:{height:.35*me.height,width:.3*me.height,marginBottom:"0.5em",position:"absolute",flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(245, 245, 237, 0.8)",borderRadius:10,left:me.width/2,top:me.height/3},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},color:{width:"36px",height:"14px",borderRadius:"2px"},Cat:{color:"pink",backgroundColor:"pink"}});Object(r.default)(we)}},[[160,1,2]]]);
//# sourceMappingURL=app.bc10fa77.chunk.js.map